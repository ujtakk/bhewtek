module conv_wreg(/*AUTOARG*/);
`include "parameters.vh"

    /*AUTOINPUT*/
    input [DWIDTH-1:0] read_data;
    input wreg_we; // write enable
    input clk;

    /*AUTOOUTPUT*/
    //<% for i in 0..24 %>
    output signed [DWIDTH-1:0] weight<%=i%>;
    //<% end %>

    /*AUTOWIRE*/

    /*AUTOREG*/
    //<% for i in 0..24 %>
    reg [DWIDTH-1:0] r_weight<%=i%>;
    //<% end %>

    assign weight<%=i%> = r_weight<%=i%>;

    //<% for i in 0..24 %>
    always @(posedge clk)
        if (wreg_we)
            //<% if i == 24 %>
            r_weight<%=i%> <= read_data;
            //<% else %>
            r_weight<%=i%> <= r_weight<%=i+1%>;
            //<% end %>
        else
            r_weight<%=i%> <= r_weight<%=i%>;
    //<% end %>

endmodule

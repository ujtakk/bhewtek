`timescale 1ns/1ps

module test_conv();
`include "parameters.vh"

    /*AUTOREGINPUT*/

    /*AUTOWIRE*/

    //clock
    always
    begin
        clk = 0;
        #(CLK/2);
        clk = 1;
        #(CLK/2);
    end

    initial
    begin
        #(CLK);
        xrst = 0;
        wreg_we = 0;
        /* <% for i in 0..24 %> */
        pixel<%=i%> = 0;
        /* <% end %> */
        #(CLK);
        xrst = 1;
        #(CLK);
        wreg_we = 1;
        /* <% for i in 0..24 %> */
        read_data = <%=i%>;
        #(CLK);
        /* <% end %> */
        wreg_we = 0;
        /* <% for i in 0..24 %> */
        pixel<%=i%> = <%=i%>;
        /* <% end %> */
        #(CLK*3);
        $finish();
    end

    always
    begin
        #(CLK/2-1);
        $display("%d %d | %d ", xrst, wreg_we, read_data);
        /* <% for i in 0..4 %> */
        $display(
            /* <%   for j in 0..3 %> */
            "%d ", pixel<%=5*i+j%>,
            /* <% end %> */
            "%d ", pixel<%=5*i+4%>,
            "| ",
            /* <%   for j in 0..3 %> */
            "%d ", dut0.weight<%=5*i+j%>,
            /* <% end %> */
            "%d ", dut0.weight<%=5*i+4%>,
        );
        /* <% end %> */
        $display("output: %d\n", fmap);
        #(CLK/2+1);
    end

    conv dut0(/*AUTOINST*/);

endmodule

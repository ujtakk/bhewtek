`timescale 10ps/1ps

module test_linebuf_pix();
`include "parameters.vh"

    /*AUTOREGINPUT*/

    /*AUTOWIRE*/

    //clock
    always
    begin
        clk = 0;
        #(CLK/2);
        clk = 1;
        #(CLK/2);
    end

    integer fp;

    initial
    begin
        fp = $fopen("lbpix.txt");
        /* <% for i in 0..5 %> */
        /* <%   for j in 0..27 %> */
        #(CLK);
        read_data = <%=28*i+j%>;
        /* <%   end %> */
        /* <% end %> */
        #(CLK);
        #(CLK);
        $finish();
    end

    always
    begin
        #(CLK/2-1);
        $fdisplay(fp, "input: %d", read_data);
        /* <% for i in 0..4 %> */
        $fdisplay(fp,
            /* <%   for j in 0..3 %> */
            "%d ", pixel<%=5*i+j%>,
            /* <% end %> */
            "%d ", pixel<%=5*i+4%>
        );
        /* <% end %> */
        #(CLK/2+1);
    end

    linebuf_pix dut0(/*AUTOINST*/);

endmodule

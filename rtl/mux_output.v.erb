module mux_output(/*AUTOARG*/);
`include "parameters.vh"
<%- load "parameters.rb" -%>

  /*AUTOINPUT*/
  input clk;
  input [<%=$core_log%>:0] output_re;
  <%- for i in 0...$core -%>
  input signed [DWIDTH-1:0] read_output<%=i%>;
  <%- end -%>

  /*AUTOOUTPUT*/
  output signed [DWIDTH-1:0] read_output;

  /*AUTOWIRE*/

  /*AUTOREG*/
  reg [DWIDTH-1:0] r_output;

  assign read_output = r_output;

  always @(posedge clk)
    case (output_re)
      4'd0:     r_output <= {DWIDTH{1'b0}};
      <%- for i in 0...$core -%>
      4'd<%=i+1%>:     r_output <= read_output<%=i%>;
      <%- end -%>
      default:  r_output <= {DWIDTH{1'b0}};
    endcase

endmodule
